<div class="register-wrapper">
  <form class="register-form" [formGroup]="form" (ngSubmit)="submit()">

    <h1>Registrarse</h1>
    <p class="explain">Creá tu cuenta y luego verificá tu email.</p>

    <div class="form-field">
      <label for="nombre">Nombre</label>
      <input
        id="nombre"
        type="text"
        formControlName="nombre"
        [class.is-invalid]="form.get('nombre')?.touched && form.get('nombre')?.invalid"
      />
      <small class="field-error" *ngIf="form.get('nombre')?.touched && form.get('nombre')?.invalid">
        El nombre es obligatorio.
      </small>
    </div>

    <div class="form-field">
      <label for="email">Correo electrónico</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        [class.is-invalid]="form.get('email')?.touched && form.get('email')?.invalid"
      />
      <small class="field-error" *ngIf="form.get('email')?.touched && form.get('email')?.invalid">
        Ingresá un email válido.
      </small>
    </div>

    <div class="form-field">
      <label for="password">Contraseña</label>
      <input
        id="password"
        type="password"
        formControlName="password"
        [class.is-invalid]="form.get('password')?.touched && form.get('password')?.invalid"
      />
      <small class="field-error" *ngIf="form.get('password')?.touched && form.get('password')?.invalid">
        La contraseña es obligatoria.
      </small>
    </div>

    <div class="form-field">
      <label for="password_confirmation">Repetir contraseña</label>
      <input
        id="password_confirmation"
        type="password"
        formControlName="password_confirmation"
        [class.is-invalid]="form.get('password_confirmation')?.touched && form.get('password_confirmation')?.invalid"
      />
      <small class="field-error"
             *ngIf="form.get('password_confirmation')?.touched && form.get('password_confirmation')?.invalid">
        Repetí la contraseña.
      </small>
    </div>

    <button type="submit" [disabled]="loading()">
      {{ loading() ? 'Registrando...' : 'Registrarse' }}
    </button>

    <p class="mensaje-exito" *ngIf="messageSuccess() as ok">
      {{ ok }}
    </p>

    <p class="mensaje-error" *ngIf="messageError() as error">
      {{ error }}
    </p>

  </form>
</div>
